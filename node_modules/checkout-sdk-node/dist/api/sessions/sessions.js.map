{"version":3,"file":"sessions.js","names":["_errors","require","_http","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","asyncGeneratorStep","gen","resolve","reject","_next","_throw","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","err","Sessions","constructor","config","request","body","_this","response","post","httpClient","host","sk","json","determineError","get","id","channel","_this2","headers","update","_this3","put","complete","_this4","update3DSMethodCompletionIndicator","threeDsMethodCompletion","_this5","three_ds_method_completion","exports","default"],"sources":["../../../src/api/sessions/sessions.js"],"sourcesContent":["import { determineError } from '../../services/errors';\r\nimport { get, post, put } from '../../services/http';\r\n\r\n/**\r\n * Class dealing with the /sessions endpoint\r\n *\r\n * @export\r\n * @class Sessions\r\n */\r\nexport default class Sessions {\r\n    constructor(config) {\r\n        this.config = config;\r\n    }\r\n\r\n    /**\r\n     * Create a payment session to authenticate a cardholder before requesting a payment.\r\n     *\r\n     * @memberof Sessions\r\n     * @param {Object} body Sessions request body.\r\n     * @return {Promise<Object>} A promise to the sessions response.\r\n     */\r\n    async request(body) {\r\n        try {\r\n            const response = await post(\r\n                this.config.httpClient,\r\n                `${this.config.host}/sessions`,\r\n                this.config,\r\n                this.config.sk,\r\n                body\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the details of the session with the specified identifier string.\r\n     *\r\n     * @memberof Sessions\r\n     * @param {string} id Sessions id.\r\n     * @param {string} channel Type of channnel.\r\n     * @return {Promise<Object>} A promise to the sessions response.\r\n     */\r\n    async get(id, channel) {\r\n        try {\r\n            this.config.headers = { ...this.config.headers, channel };\r\n\r\n            const response = await get(\r\n                this.config.httpClient,\r\n                `${this.config.host}/sessions/${id}`,\r\n                this.config,\r\n                this.config.sk\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update a session by providing information about the environment.\r\n     *\r\n     * @memberof Sessions\r\n     * @param {string} id Sessions id.\r\n     * @param {Object} body Sessions request body.\r\n     * @return {Promise<Object>} A promise to the sessions response.\r\n     */\r\n    async update(id, body) {\r\n        try {\r\n            const response = await put(\r\n                this.config.httpClient,\r\n                `${this.config.host}/sessions/${id}/collect-data`,\r\n                this.config,\r\n                this.config.sk,\r\n                body\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Completes a session by posting the the following request to the callback URL\r\n     * (only relevant for non hosted sessions)\r\n     *\r\n     * @memberof Sessions\r\n     * @param {string} id Sessions id.\r\n     * @return {Promise<Object>} A promise to the sessions response.\r\n     */\r\n    async complete(id) {\r\n        try {\r\n            const response = await post(\r\n                this.config.httpClient,\r\n                `${this.config.host}/sessions/${id}/complete`,\r\n                this.config,\r\n                this.config.sk\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Completes a session by posting the the following request to the callback URL\r\n     * (only relevant for non hosted sessions)\r\n     *\r\n     * @memberof Sessions\r\n     * @param {string} id Sessions id.\r\n     * @param {string} threeDsMethodCompletion 3DS Method completion indicator\r\n     * @return {Promise<Object>} A promise to the sessions response.\r\n     */\r\n    async update3DSMethodCompletionIndicator(id, threeDsMethodCompletion) {\r\n        try {\r\n            const body = {\r\n                three_ds_method_completion: threeDsMethodCompletion,\r\n            };\r\n\r\n            const response = await put(\r\n                this.config.httpClient,\r\n                `${this.config.host}/sessions/${id}/issuer-fingerprint`,\r\n                this.config,\r\n                this.config.sk,\r\n                body\r\n            );\r\n\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n}\r\n"],"mappings":"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"}