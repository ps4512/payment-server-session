{"version":3,"file":"reports.js","names":["_errors","require","_http","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","asyncGeneratorStep","gen","resolve","reject","_next","_throw","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","err","Reports","constructor","config","getAllReports","parameters","_this","url","host","queryString","map","join","response","get","httpClient","sk","json","determineError","getReportDetails","id","_this2","getReportFile","fileId","_this3","csv","exports","default"],"sources":["../../../src/api/reports/reports.js"],"sourcesContent":["import { determineError } from '../../services/errors';\r\nimport { get } from '../../services/http';\r\n\r\n/**\r\n * Class dealing with the /reports api endpoint\r\n *\r\n * @export\r\n * @class Reports\r\n */\r\nexport default class Reports {\r\n    constructor(config) {\r\n        this.config = config;\r\n    }\r\n\r\n    /**\r\n     * Returns the list of reports and their details.\r\n     *\r\n     * @memberof Reports\r\n     * @param {Object} parameters Parameters.\r\n     * @return {Promise<Object>} A promise to the Reports response.\r\n     */\r\n    async getAllReports(parameters) {\r\n        try {\r\n            let url = `${this.config.host}/reports`;\r\n\r\n            if (parameters) {\r\n                const queryString = Object.keys(parameters)\r\n                    .map((key) => `${key}=${parameters[key]}`)\r\n                    .join('&');\r\n                url += `?${queryString}`;\r\n            }\r\n\r\n            const response = await get(\r\n                this.config.httpClient, \r\n                url, \r\n                this.config, \r\n                this.config.sk\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Use this endpoint to retrieve a specific report using its ID.\r\n     *\r\n     * @memberof Reports\r\n     * @param {string} id The ID of the report to retrieve.\r\n     * @return {Promise<Object>} A promise to the Reports response.\r\n     */\r\n    async getReportDetails(id) {\r\n        try {\r\n            const response = await get(\r\n                this.config.httpClient,\r\n                `${this.config.host}/reports/${id}`,\r\n                this.config,\r\n                this.config.sk\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Use this endpoint to retrieve a specific file from a given report using their respective IDs.\r\n     *\r\n     * @memberof Reports\r\n     * @param {string} id The ID of the report that the file belongs to.\r\n     * @param {Object} fileId The ID of the file to retrieve.\r\n     * @return {Promise<Object>} A promise to the Reports response.\r\n     */\r\n    async getReportFile(id, fileId) {\r\n        try {\r\n            const response = await get(\r\n                this.config.httpClient,\r\n                `${this.config.host}/reports/${id}/files/${fileId}`,\r\n                { ...this.config, csv: true },\r\n                this.config.sk\r\n            );\r\n            return await response.csv;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n}\r\n"],"mappings":"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"}